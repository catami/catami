{% extends "base-topmenu.html" %}
{% block title %}Catami Project - Project List {% endblock %}

{% block content %}

    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}assets/css/elastislide/elastislide.css" />
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}assets/css/elastislide/custom.css" />

    <div id="ProjectAnnotateContainer"></div>

    <script type="text/template" id="ProjectAnnotateTemplate">

    <!--
    <div class="row-fluid">
        <div class="span12">
            <ul class="breadcrumb">

                <li><a href="/projects/">Projects</a> <span
                        class="divider">></span></li>
                <li class="active"><%= name %></li>

            </ul>
        </div>
    </div>
    -->

    <div class='row-fluid'>
        <div class="span12 thumbnail-pane catami-slide" id ="thumbnail-pane">
            <ul id='carousel' class='elastislide-list'>
                <%=images%>
            </ul>
        </div>
    </div>


    </script>

    <script type="text/template" id="ImageTemplate">
        <li><div class='wrapper'><a href='#'><div class='description'></div><img src='<%= thumbnail_location %>' data-src='<%= thumbnail_location %>' alt='image'></a></div></li>
    </script>

    <script src="{{ STATIC_URL }}assets/jquery/modernizr.custom.17475.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jquery/jquery.elastislide.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jpages/js/jPages.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/backbone/templates/project-model.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/backbone/templates/annotationset-model.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/backbone/templates/project-annotate-view.js"></script>


    <script type="text/javascript">

        var projectId = "{{ project_id }}";
        var annotationSets = new AnnotationSets();
        annotationSets.fetch({
            data: { project: projectId },
            success: function (model, response, options) {
                //load the view
                var projectAnnotateView = new ProjectAnnotateView({
                    el: $("#ProjectAnnotateContainer"),
                    model : annotationSets
                });

                $( '#carousel' ).elastislide( {
                    orientation : 'horizontal',
                    minItems : 5,
                    onClick : function( el, position, evt ) {selectImageFromList(position);}
                } );
            },
            error: function (model, response, options) {
                alert('Fetch failed: ' + response.status);
            }
        });

    </script>

{% endblock %}