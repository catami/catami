{% extends "base-topmenu.html" %}
{% block title %}Catami Project - Project List {% endblock %}

{% block content %}

    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}assets/css/elastislide/elastislide.css" />
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}assets/css/elastislide/custom.css" />
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}assets/css/elastislide/custom.css" />
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}assets/catami-api/css/bootstrapSwitch.css"/>
	<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}assets/css/annotation_accordion.css" />

    <style type="text/css">
        div.wrapper{
		    float:left; /* important */
		    position:relative; /* important(so we can absolutely position the description div */
		}
		div.description{
		    position:absolute; /* absolute position (so we can position it where we want)*/
		    bottom:5px;
		    left:0px;
		    width:100%;
		    background-color:rgba(0,0,0,0.2);
		    font-family: 'helvetica';
		    font-size:15px;
		    color:white;
		    font-weight: bold;
		    text-align: center;
		}

        #ImageContainer {
            position: relative;
            margin-top: 10px;
            /*margin-right: 510px;*/
        }

        #ImageContainer span {
            position: absolute;
            margin: 0px;
        }

        #Image {
            /*display: block;*/
            margin: 0px;
            position: relative;
        }

        .pointAnnotated {
        	-moz-box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8), 0px 0px 3px rgba(0,0,0,0.8);
			-webkit-box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8),  0px 0px 3px rgba(0,0,0,0.8);
			box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8), 0px 0px 3px rgba(0,0,0,0.8);
            min-width: 12px;
            min-height: 12px;
		    background-color:rgba(20,237,24,0.0);
		    border: 2px solid #fff;
			border-top-left-radius: 25%;
			border-top-right-radius: 25%;
			border-bottom-left-radius: 25%;
			border-bottom-right-radius: 25%;
			color: #fff;
			text-shadow: 0px 0px 3px rgba(0,0,0,0.8);
        }


	    .pointNotAnnotated {
        	-moz-box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8), 0px 0px 3px rgba(0,0,0,0.8);
			-webkit-box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8),  0px 0px 3px rgba(0,0,0,0.8);
			box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8), 0px 0px 3px rgba(0,0,0,0.8);
            width: 12px;
            height: 12px;
		    background-color:rgba(32,103,235,0.1);
		    border: 1px solid #fff;
		}

		@-webkit-keyframes rotation {
		    from {-webkit-transform: rotate(0deg);}
		    to   {-webkit-transform: rotate(359deg);}
		}

		.pointSelected {
        	-moz-box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8), 0px 0px 3px rgba(0,0,0,0.8);
			-webkit-box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8),  0px 0px 3px rgba(0,0,0,0.8);
			box-shadow:inset 0px 0px 3px rgba(0,0,0,0.8), 0px 0px 3px rgba(0,0,0,0.8);
            -webkit-animation: rotation 2s infinite linear;
            width: 12px;
            height: 12px;
		    background-color:rgba(240,206,9,0.1);
		    border: 2px dashed #fff;
			border-top-left-radius: 50%;
			border-top-right-radius: 50%;
			border-bottom-left-radius: 50%;
			border-bottom-right-radius: 50%;
		}
		.wholeImageList{
			list-style-type: none;
			padding: 0px;
			margin: 0px 0px 14px 0px;
		}
		.wholeImageItem {
		    list-style-position:outside;
		    border-bottom: 2px solid white;
		    background-color: rgba(237,237,237,1);
		    padding: 3px 5px 3px 5px;
		    font-weight: bold;
		}
		.wholeImageHeader {
		    list-style-position:outside;
		    border-bottom: 2px solid #e99c1e;
		    border-bottom-color: white;
		    border-top-color: white;
		    background-color: #ebe0cf;
		    padding: 3px 5px 6px 5px;
		    font-weight: bold;
		}
		.wholeImageFooter {
		    list-style-position:outside;
		    border-bottom: 2px solid #e99c1e;
		    border-bottom-color: white;
		    border-top-color: white;
		    background-color: #d7d1c7;
			padding-left: 10px;
			padding-right: 10px;
			padding-bottom: 3px;
			padding-top: 3px;
			font-weight: 300;
		}

		.wholeImageLabel{
			padding-left: 10px;
			padding-right: 10px;
			font-weight: 500;
			background-color: white;
			font-size: smaller;
		}
		
		.wholeImageList a{
/* 			color: black; */
		}

/*--------------------------------------------------------------
1.0 - TOOLBAR http://codepen.io/cameronbaney/pen/dhKIo
--------------------------------------------------------------*/
	.imageToolbar ul {
		position:absolute;
		background-color: gray;
		border: 2px;
		border-color: black;
		top:50%;
		border-radius: 4px;
		box-shadow: 0 0 3px rgba(64,100,138,.3), 0 2px 4px #3b5c7f, 0 12px 18px rgba(64,100,138,.4);
		list-style-type: none;
	}
	.imageToolbar li {
		display: inline;
		border-right: 2px;
		border-left: 2px;
		border-color: gray;
	}
	.imageToolbar a {
		text-decoration: none;
		border-right: 2px;
		border-left: 2px;
		border-color: gray;
	}
	</style>


    <!-- elastislide thumbnail div -->
    <div class="row-fluid">
        <div id="ThumbnailStripContainer"></div>
    </div>

    <div class="row-fluid">

		<section class="span9">
        	<div class="row span12">
	            <div id="ImageContainer"></div>
	        </div>
	        <div class="row span12" style="position: relative;">
				    <ul class="imageToolbar cf">
			            <li><a href="#" class="zoom-out"><i class="icon-zoom-out icon-2x"></i></a><span>Out</span></li>
			            <li><a href="#" class="zoom-in"><i class="icon-zoom-in icon-2x"></i></a><span>In</span></li>
						<li><a href="#" class="icon-border"><input type="range" class="zoom-range"></a><span>Image Zoom</span></li>
<!--
						<li><a class="btn btn-small reset">Reset Zoom</a> Reset Zoom</li>
						<li><a id="hide_points_button" class="btn">Hide Points (click and hold me)</a></li>
						<li><a id="deselect_points_button" class="btn">Deselect Points</a></li>
-->

				    </ul>
	        </div>
        </section>


        <div class="span3" style="margin-top: 10px;">

<!--
            <section>
                <div id="ImageZoomControlContainer" ></div>
            </section>

            <section>
                <div id="ImagePointsControlContainer" ></div>
            </section>
-->

            <section>
                <div id="ChooseAnnotationContainer" ></div>
            </section>

            <section>
                <div id="ImagePILSContainer" ></div>
            </section>

            <section>
                <div id="ImageSimilarityContainer" ></div>
            </section>
        </div>

    </div>

<!--
    <div id="ImageSimilarityModalContainer"></div>
    <script type="text/template" id="ImageSimilarityModalTemplate">

    </script>
-->

    <script type="text/template" id="ImageSimilarityTemplate">
        <h3>Similar Image Cluster</h3>
        <%=images%>
    </script>

    <script type="text/template" id="SimilarityThumbnailTemplate">
        <a href="#<%= index %>-modal" data-toggle="modal"> <img id="<%= index %>" class="similarThumbnail" src="<%= thumbnail_location %>" style="padding-bottom: 5px;"> </a>

        <!-- Modal -->
        <div id="<%= index %>-modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
            <h3 id="myModalLabel">Copy the same broad scale classification to this image?</h3>
          </div>
          <div class="modal-body">
            <img src="<%= web_location %>">
          </div>
          <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">No</button>
            <button id="<%= index %>" data-dismiss="modal" class="btn btn-primary yesItsTheSame">Yes</button>
          </div>
        </div>
    </script>

    <script type="text/template" id="ImagePILSTemplate">

        <div>
			<h3>Image Labels</h3>
			<ul id="LabelPils" class="nav nav-pills"></ul>
        </div>

    </script>

    <script type="text/template" id="ImageZoomControlTemplate">
        <section class="buttons well">
            <div class="btn-group">
                <button class="btn zoom-in">Zoom In</button>
                <button class="btn zoom-out">Zoom Out</button>
            </div>
            <input type="range" class="zoom-range">
            <button class="btn btn-small reset">Reset</button>
        </section>
    </script>

    <script type="text/template" id="ImagePointsControlTemplate">
        <div class="well">
            <a id="hide_points_button" class="btn">Hide Points (click and hold me)</a>
            <!--<button id="zoom_toggle" type="button" class="btn" data-toggle="button">Zoom Toggle</button>-->
            <a id="deselect_points_button" class="btn">Deselect Points</a>
        </div>
    </script>

    <script type="text/template" id="ChooseAnnotationTemplate">

        <div class="whole-image-annotation-selector" id="whole-image-annotation-selector"></div>
    	<div id="annotation-chooser"></div>


	</script>

	<script type="text/template" id="ToolbarTemplate">
	
	</script>
	
	<script type="text/template" id="WholeImageAnnotationTemplate">
		<div>
			<ul class="wholeImageList">
				<li class="wholeImageHeader"><span>Broad Scale Classes</span><a id="clear_all_broad_scale" class="btn btn-mini btn-danger pull-right">Reset All</a></li>
				<a href='#' id="biota_annotation_label"><li class="wholeImageItem"><span><span>Dominant Biota</span><span class="wholeImageLabel pull-right" id="dominant_biota">Not Considered</span></span></li></a>
				<a href='#' id="substrate_annotation_label"><li class="wholeImageItem"><span>Dominant Substrate</span><span class="wholeImageLabel pull-right" id="dominant_substrate" class="pull-right">Not Considered</span></li></a>
				<a href='#' id="relief_annotation_label"><li class="wholeImageItem"><span>Relief</span><span class="wholeImageLabel pull-right" id="relief" class="pull-right">Not Considered</span></li></a>
				<a href='#' id="bedform_annotation_label"><li class="wholeImageItem"><span>Bedform</span><span class="wholeImageLabel pull-right" id="bedform" class="pull-right">Not Considered</span></li></a>
				<li class="wholeImageFooter"><span class="label label-info">Tip</span><em> Choose classes below</em></li>
			</ul>
		</div>
	</script>

    <script type="text/template" id="ThumbnailStripTemplate">
        <div class="row-fluid">
            <div class="span12">
                <ul class="breadcrumb">

                    <li><a href="/projects/">Projects</a> <span
                            class="divider">></span></li>
                    <li><a href="/projects/<%=id%>/" ><%= name %></a> <span
                            class="divider">></span></li>
                    <li class="active">Annotate</li>

                </ul>
            </div>
        </div>

        <div class='row-fluid'>
            <div class="span12 thumbnail-pane catami-slide" id ="thumbnail-pane">
                <ul id='carousel' class='elastislide-list'>
                    <%=thumbnails%>
                </ul>
            </div>
        </div>
    </script>

    <script type="text/template" id="ThumbnailTemplate">
        <li><div class='wrapper'><a href='#'><div class='description'></div><img src='<%= thumbnail_location %>' data-src='<%= thumbnail_location %>' alt='image'></a></div></li>
    </script>

    <script type="text/template" id="ImageTemplate">
        <img id="Image" src='<%= web_location %>' data-src='<%= web_location %>' alt='image'>
    </script>

    <script src="{{ STATIC_URL }}assets/jquery/modernizr.custom.17475.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jquery/jquery.elastislide.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jpages/js/jPages.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/backbone/templates/project-model.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/backbone/templates/point-annotation-model.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/backbone/templates/whole-image-annotation-model.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/backbone/templates/annotationset-model.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/backbone/templates/project-annotate-view.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jquery/plugins/jquery.imagesloaded.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jquery/plugins/jquery.accordion.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jquery/plugins/jquery.panzoom.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/jquery.elevatezoom/jquery.elevateZoom-2.5.5.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}assets/bootstrap/js/bootstrap-button.js"></script>

    <script type="text/javascript">

        var projectId = "{{ project_id }}";
        var project = new Project({"id": projectId});

        var orchestratorView = new OrchestratorView();

    </script>

    <script>

    </script>


{% endblock %}
